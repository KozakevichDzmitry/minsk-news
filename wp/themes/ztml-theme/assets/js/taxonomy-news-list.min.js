(()=>{"use strict";jQuery(document).ready(function(a){const o=a(".load-moree-btn"),e=(t,e)=>a.ajax({url:"/wp-admin/admin-ajax.php",data:{...d,...t},type:"POST",success:t=>e(t)}),n=(a.datepicker.setDefaults(a.datepicker.regional.ru),a(".datepicker-toggle .datepicker-reset-button"));let s=null;const d={action:"taxonomy_news_posts_load",load:15,offset:27,tax_query:{taxonomy:a(".load-moree-btn button").attr("data-tax-name"),field:"term_id",terms:a(".load-moree-btn button").attr("data-tax-id")}};n.on("click",()=>{s=null,d.offset=0,e({date:null},t=>{var e;n.hide(),t&&({posts:t,count:e}=JSON.parse(t),e<=d.offset+d.load?o.hide():o.show(),a(".main-content .ta-list").empty(),a(".main-content .ta-list").append(t),d.offset+=d.load,a(".load-moree-btn button").attr("data-all-posts",e))})}),o.on("click",()=>{o.find("button").text("Загрузка..."),e(s?{date:s}:{},t=>{var e;t&&({posts:t,count:e}=JSON.parse(t),e<=d.offset+d.load?o.hide():o.show(),a(".main-content .ta-list").append(t),d.offset+=d.load,a(".load-moree-btn button").attr("data-all-posts",e),o.find("button").text("Показать еще"))})}),a("#datepicker-tax-news-template").datepicker({showOn:"both",changeMonth:!0,changeYear:!0,dateFormat:"yy-mm-dd",minDate:a("#datepicker-tax-news-template").data("min-date"),maxDate:a("#datepicker-tax-news-template").data("max-date"),onSelect:t=>{s=t,d.offset=0,e({date:t},t=>{var{posts:t,count:e}=JSON.parse(t);n.show(),e<=d.offset+d.load?a(".load-moree-btn").hide():a(".load-moree-btn").show(),a(".main-content .ta-list").empty(),a(".main-content .ta-list").append(t),d.offset+=d.load,a(".load-moree-btn button").attr("data-all-posts",e)})}})}),jQuery(function(e){let a=e(".main-content .post:last")[0],o={action:"loadmorenews",offset:3,exclude:e(".main-content").attr("id"),load:9};const n=new IntersectionObserver(([t])=>{t.isIntersecting&&e.ajax({type:"POST",url:ajax.ajaxurl,data:o,beforeSend:function(){e(".loading-posts").addClass("active")},success:function(t){t?(o.offset+=o.load,e(a).after(t),n.unobserve(a),a=e(".main-content .post:last")[0],e(".loading-posts").removeClass("active"),n.observe(a)):(n.unobserve(a),e(".loading-posts").removeClass("active"))}})},{root:null,rootMargin:"10px",threshold:.1});a&&n.observe(a)})})();