(()=>{"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function e(e,t){var o,n=Object.keys(e);return Object.getOwnPropertySymbols&&(o=Object.getOwnPropertySymbols(e),t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)),n}function c(n){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?e(Object(a),!0).forEach(function(t){var e,o;e=n,o=a[t=t],(t=function(t){t=function(t,e){if("object"!==r(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0===o)return("string"===e?String:Number)(t);o=o.call(t,e||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===r(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):e(Object(a)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(a,t))})}return n}jQuery(document).ready(function(o){function e(t,e){o.ajax({url:"/wp-admin/admin-ajax.php",data:c(c({},i),t),type:"POST",success:function(t){return e(t)}})}var n=o(".load-moree-btn"),a=(o.datepicker.setDefaults(o.datepicker.regional.ru),o(".datepicker-toggle .datepicker-reset-button")),r=null,i={action:"taxonomy_news_posts_load",load:15,offset:27,tax_query:{taxonomy:o(".load-moree-btn button").attr("data-tax-name"),field:"term_id",terms:o(".load-moree-btn button").attr("data-tax-id")}};a.on("click",function(){r=null,i.offset=0,e({date:null},function(t){var e;a.hide(),t&&(e=(t=JSON.parse(t)).posts,(t=t.count)<=i.offset+i.load?n.hide():n.show(),o(".main-content .ta-list").empty(),o(".main-content .ta-list").append(e),i.offset+=i.load,o(".load-moree-btn button").attr("data-all-posts",t))})}),n.on("click",function(){n.find("button").text("Загрузка..."),e(r?{date:r}:{},function(t){var e;t&&(e=(t=JSON.parse(t)).posts,(t=t.count)<=i.offset+i.load?n.hide():n.show(),o(".main-content .ta-list").append(e),i.offset+=i.load,o(".load-moree-btn button").attr("data-all-posts",t),n.find("button").text("Показать еще"))})}),o("#datepicker-tax-news-template").datepicker({showOn:"both",changeMonth:!0,changeYear:!0,dateFormat:"yy-mm-dd",minDate:o("#datepicker-tax-news-template").data("min-date"),maxDate:o("#datepicker-tax-news-template").data("max-date"),onSelect:function(t){r=t,i.offset=0,e({date:t},function(t){var t=JSON.parse(t),e=t.posts,t=t.count;a.show(),t<=i.offset+i.load?o(".load-moree-btn").hide():o(".load-moree-btn").show(),o(".main-content .ta-list").empty(),o(".main-content .ta-list").append(e),i.offset+=i.load,o(".load-moree-btn button").attr("data-all-posts",t)})}})})})();