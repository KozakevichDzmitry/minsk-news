(()=>{"use strict";function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function e(e,t){var o,n=Object.keys(e);return Object.getOwnPropertySymbols&&(o=Object.getOwnPropertySymbols(e),t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)),n}function c(n){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?e(Object(r),!0).forEach(function(t){var e,o;e=n,o=r[t=t],(t=function(t){t=function(t,e){if("object"!==a(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0===o)return("string"===e?String:Number)(t);o=o.call(t,e||"default");if("object"!==a(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===a(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):e(Object(r)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(r,t))})}return n}jQuery(document).ready(function(o){function e(t,e){o.ajax({url:"/wp-admin/admin-ajax.php",data:c(c({},l),t),type:"POST",success:function(t){return e(t)}})}var n=o(".load-moree-btn"),t=document.querySelector("main").dataset.authorid,r=n.attr("data-all-posts"),a=(o.datepicker.setDefaults(o.datepicker.regional.ru),o(".datepicker-toggle .datepicker-reset-button")),i=null,l={action:"author_materials_load",load:27,offset:27};t&&(l.authorID=t),a.on("click",function(){i=null,l.offset=0,e({date:null},function(t){a.hide(),t&&(t=JSON.parse(t).posts,r<=l.offset+l.load?n.hide():n.show(),o(".main-content .ta-list").empty(),o(".main-content .ta-list").append(t),l.offset+=l.load)})}),n.on("click",function(){n.find("button").text("Загрузка..."),e(i?{date:i}:{},function(t){t&&(t=JSON.parse(t).posts,r<=l.offset+l.load?n.hide():n.show(),o(".main-content .ta-list").append(t),l.offset+=l.load,n.find("button").text("Показать еще"))})}),o("#datepicker-all-authors-materials-template").datepicker({showOn:"both",changeYear:!0,changeMonth:!0,dateFormat:"yy-mm-dd",minDate:o("#datepicker-all-authors-materials-template").data("min-date"),maxDate:o("#datepicker-all-authors-materials-template").data("max-date"),onSelect:function(t){i=t,l.offset=0,e({date:t},function(t){var t=JSON.parse(t),e=t.posts,t=t.count;a.show(),t<=l.offset+l.load?o(".load-moree-btn").hide():o(".load-moree-btn").show(),o(".main-content .ta-list").empty(),o(".main-content .ta-list").append(e),l.offset+=l.load,o(".load-moree-btn button").attr("data-all-posts",t)})}})})})();