(()=>{"use strict";jQuery(document).ready(function(e){const o=e(".load-moree-btn");var t=document.querySelector("main").dataset.authorid;const a=(t,a)=>e.ajax({url:"/wp-admin/admin-ajax.php",data:{...s,...t},type:"POST",success:t=>a(t)}),n=(e.datepicker.setDefaults(e.datepicker.regional.ru),e(".datepicker-toggle .datepicker-reset-button"));let l=null;const s={action:"author_materials_load",load:27,offset:27};t&&(s.authorID=t),n.on("click",()=>{l=null,s.offset=0,a({date:null},t=>{var a;n.hide(),t&&({posts:t,count:a}=JSON.parse(t),a<=s.offset+s.load?o.hide():o.show(),e(".main-content .ta-list").empty(),e(".main-content .ta-list").append(t),s.offset+=s.load,e(".load-moree-btn button").attr("data-all-posts",a))})}),o.on("click",()=>{o.find("button").text("Загрузка..."),a(l?{date:l}:{},t=>{var a;t&&({posts:t,count:a}=JSON.parse(t),a<=s.offset+s.load?o.hide():o.show(),e(".main-content .ta-list").append(t),s.offset+=s.load,e(".load-moree-btn button").attr("data-all-posts",a),o.find("button").text("Показать еще"))})}),e("#datepicker-all-authors-materials-template").datepicker({showOn:"both",changeYear:!0,changeMonth:!0,dateFormat:"yy-mm-dd",minDate:e("#datepicker-all-authors-materials-template").data("min-date"),maxDate:e("#datepicker-all-authors-materials-template").data("max-date"),onSelect:t=>{l=t,s.offset=0,a({date:t},t=>{var{posts:t,count:a}=JSON.parse(t);n.show(),a<=s.offset+s.load?e(".load-moree-btn").hide():e(".load-moree-btn").show(),e(".main-content .ta-list").empty(),e(".main-content .ta-list").append(t),s.offset+=s.load,e(".load-moree-btn button").attr("data-all-posts",a)})}})})})();